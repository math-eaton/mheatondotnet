import{j as Pe}from"./jsx-runtime.D_zvdyIk.js";import{r as ue}from"./index.RH_Wq4ov.js";import{m as je,n as ze,C as Ve,G as ke,B as pe,F as W,e as ie,o as me,p as q,q as De,L as ge,r as ne,b as fe,g as O,S as Re,P as be,W as Be,s as Oe,O as He,A as Ye,D as We,j as ve,t as we,u as ye,v as oe,w as Z,I as Ae,x as Te,y as U,z as se,H as xe,J as Ce,K as Ee,N as J}from"./OrbitControls.Bn8mG_4i.js";const Xe=/^[og]\s*(.+)?/,Ge=/^mtllib /,Ne=/^usemtl /,qe=/^usemap /,_e=/\s+/,Me=new O,re=new O,Le=new O,$e=new O,S=new O,K=new Ve;function Ze(){const p={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const n=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(o,s){const l=this._finalize(!1);l&&(l.inherited||l.groupCount<=0)&&this.materials.splice(l.index,1);const a={index:this.materials.length,name:o||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:l!==void 0?l.smooth:this.smooth,groupStart:l!==void 0?l.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(i){const u={index:typeof i=="number"?i:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(o){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),o&&this.materials.length>1)for(let l=this.materials.length-1;l>=0;l--)this.materials[l].groupCount<=0&&this.materials.splice(l,1);return o&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&typeof n.clone=="function"){const o=n.clone(0);o.inherited=!0,this.object.materials.push(o)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseNormalIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/3)*3},parseUVIndex:function(e,t){const n=parseInt(e,10);return(n>=0?n-1:n+t/2)*2},addVertex:function(e,t,n){const o=this.vertices,s=this.object.geometry.vertices;s.push(o[e+0],o[e+1],o[e+2]),s.push(o[t+0],o[t+1],o[t+2]),s.push(o[n+0],o[n+1],o[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const o=this.normals,s=this.object.geometry.normals;s.push(o[e+0],o[e+1],o[e+2]),s.push(o[t+0],o[t+1],o[t+2]),s.push(o[n+0],o[n+1],o[n+2])},addFaceNormal:function(e,t,n){const o=this.vertices,s=this.object.geometry.normals;Me.fromArray(o,e),re.fromArray(o,t),Le.fromArray(o,n),S.subVectors(Le,re),$e.subVectors(Me,re),S.cross($e),S.normalize(),s.push(S.x,S.y,S.z),s.push(S.x,S.y,S.z),s.push(S.x,S.y,S.z)},addColor:function(e,t,n){const o=this.colors,s=this.object.geometry.colors;o[e]!==void 0&&s.push(o[e+0],o[e+1],o[e+2]),o[t]!==void 0&&s.push(o[t+0],o[t+1],o[t+2]),o[n]!==void 0&&s.push(o[n+0],o[n+1],o[n+2])},addUV:function(e,t,n){const o=this.uvs,s=this.object.geometry.uvs;s.push(o[e+0],o[e+1]),s.push(o[t+0],o[t+1]),s.push(o[n+0],o[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,o,s,l,a,i,u){const h=this.vertices.length;let c=this.parseVertexIndex(e,h),d=this.parseVertexIndex(t,h),g=this.parseVertexIndex(n,h);if(this.addVertex(c,d,g),this.addColor(c,d,g),a!==void 0&&a!==""){const f=this.normals.length;c=this.parseNormalIndex(a,f),d=this.parseNormalIndex(i,f),g=this.parseNormalIndex(u,f),this.addNormal(c,d,g)}else this.addFaceNormal(c,d,g);if(o!==void 0&&o!==""){const f=this.uvs.length;c=this.parseUVIndex(o,f),d=this.parseUVIndex(s,f),g=this.parseUVIndex(l,f),this.addUV(c,d,g),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,o=e.length;n<o;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,o=this.uvs.length;for(let s=0,l=e.length;s<l;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,l=t.length;s<l;s++)this.addUVLine(this.parseUVIndex(t[s],o))}};return p.startObject("",!1),p}class Ue extends je{constructor(e){super(e),this.materials=null}load(e,t,n,o){const s=this,l=new ze(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(a){try{t(s.parse(a))}catch(i){o?o(i):console.error(i),s.manager.itemError(e)}},n,o)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Ze;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const n=e.split(`
`);let o=[];for(let a=0,i=n.length;a<i;a++){const u=n[a].trimStart();if(u.length===0)continue;const h=u.charAt(0);if(h!=="#")if(h==="v"){const c=u.split(_e);switch(c[0]){case"v":t.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),c.length>=7?(K.setRGB(parseFloat(c[4]),parseFloat(c[5]),parseFloat(c[6])).convertSRGBToLinear(),t.colors.push(K.r,K.g,K.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));break;case"vt":t.uvs.push(parseFloat(c[1]),parseFloat(c[2]));break}}else if(h==="f"){const d=u.slice(1).trim().split(_e),g=[];for(let v=0,_=d.length;v<_;v++){const x=d[v];if(x.length>0){const m=x.split("/");g.push(m)}}const f=g[0];for(let v=1,_=g.length-1;v<_;v++){const x=g[v],m=g[v+1];t.addFace(f[0],x[0],m[0],f[1],x[1],m[1],f[2],x[2],m[2])}}else if(h==="l"){const c=u.substring(1).trim().split(" ");let d=[];const g=[];if(u.indexOf("/")===-1)d=c;else for(let f=0,v=c.length;f<v;f++){const _=c[f].split("/");_[0]!==""&&d.push(_[0]),_[1]!==""&&g.push(_[1])}t.addLineGeometry(d,g)}else if(h==="p"){const d=u.slice(1).trim().split(" ");t.addPointGeometry(d)}else if((o=Xe.exec(u))!==null){const c=(" "+o[0].slice(1).trim()).slice(1);t.startObject(c)}else if(Ne.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(Ge.test(u))t.materialLibraries.push(u.substring(7).trim());else if(qe.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(h==="s"){if(o=u.split(" "),o.length>1){const d=o[1].trim().toLowerCase();t.object.smooth=d!=="0"&&d!=="off"}else t.object.smooth=!0;const c=t.object.currentMaterial();c&&(c.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();const s=new ke;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let a=0,i=t.objects.length;a<i;a++){const u=t.objects[a],h=u.geometry,c=u.materials,d=h.type==="Line",g=h.type==="Points";let f=!1;if(h.vertices.length===0)continue;const v=new pe;v.setAttribute("position",new W(h.vertices,3)),h.normals.length>0&&v.setAttribute("normal",new W(h.normals,3)),h.colors.length>0&&(f=!0,v.setAttribute("color",new W(h.colors,3))),h.hasUVIndices===!0&&v.setAttribute("uv",new W(h.uvs,2));const _=[];for(let m=0,y=c.length;m<y;m++){const b=c[m],C=b.name+"_"+b.smooth+"_"+f;let w=t.materials[C];if(this.materials!==null){if(w=this.materials.create(b.name),d&&w&&!(w instanceof ie)){const A=new ie;me.prototype.copy.call(A,w),A.color.copy(w.color),w=A}else if(g&&w&&!(w instanceof q)){const A=new q({size:10,sizeAttenuation:!1});me.prototype.copy.call(A,w),A.color.copy(w.color),A.map=w.map,w=A}}w===void 0&&(d?w=new ie:g?w=new q({size:1,sizeAttenuation:!1}):w=new De,w.name=b.name,w.flatShading=!b.smooth,w.vertexColors=f,t.materials[C]=w),_.push(w)}let x;if(_.length>1){for(let m=0,y=c.length;m<y;m++){const b=c[m];v.addGroup(b.groupStart,b.groupCount,m)}d?x=new ge(v,_):g?x=new ne(v,_):x=new fe(v,_)}else d?x=new ge(v,_[0]):g?x=new ne(v,_[0]):x=new fe(v,_[0]);x.name=u.name,s.add(x)}else if(t.vertices.length>0){const a=new q({size:1,sizeAttenuation:!1}),i=new pe;i.setAttribute("position",new W(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(i.setAttribute("color",new W(t.colors,3)),a.vertexColors=!0);const u=new ne(i,a);s.add(u)}return s}}/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */class P{constructor(e,t,n,o,s="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(o),this.$name=document.createElement("div"),this.$name.classList.add("name"),P.nextNameID=P.nextNameID||0,this.$name.id="lil-gui-name-"+ ++P.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),this._onChange!==void 0&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),this._onFinishChange!==void 0&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,this._listenCallbackID!==void 0&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class Je extends P{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function le(p){let e,t;return(e=p.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=p.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=p.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const Ke={isPrimitive:!0,match:p=>typeof p=="string",fromHexString:le,toHexString:le},X={isPrimitive:!0,match:p=>typeof p=="number",fromHexString:p=>parseInt(p.substring(1),16),toHexString:p=>"#"+p.toString(16).padStart(6,0)},Qe={isPrimitive:!1,match:Array.isArray,fromHexString(p,e,t=1){const n=X.fromHexString(p);e[0]=(n>>16&255)/255*t,e[1]=(n>>8&255)/255*t,e[2]=(255&n)/255*t},toHexString:([p,e,t],n=1)=>X.toHexString(p*(n=255/n)<<16^e*n<<8^t*n<<0)},et={isPrimitive:!1,match:p=>Object(p)===p,fromHexString(p,e,t=1){const n=X.fromHexString(p);e.r=(n>>16&255)/255*t,e.g=(n>>8&255)/255*t,e.b=(255&n)/255*t},toHexString:({r:p,g:e,b:t},n=1)=>X.toHexString(p*(n=255/n)<<16^e*n<<8^t*n<<0)},tt=[Ke,X,Qe,et];class it extends P{constructor(e,t,n,o){var s;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(s=this.initialValue,tt.find(l=>l.match(s))),this._rgbScale=o,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const l=le(this.$text.value);l&&this._setValueFromHexString(l)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class ae extends P{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",o=>{o.preventDefault(),this.getValue().call(this.object)}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class nt extends P{constructor(e,t,n,o,s,l){super(e,t,n,"number"),this._initInput(),this.min(o),this.max(s);const a=l!==void 0;this.step(a?l:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=this._decimals===void 0?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=h=>{const c=parseFloat(this.$input.value);isNaN(c)||(this._snapClampSetValue(c+h),this.$input.value=this.getValue())};let t,n,o,s,l,a=!1;const i=h=>{if(a){const c=h.clientX-t,d=h.clientY-n;Math.abs(d)>5?(h.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(c)>5&&u()}if(!a){const c=h.clientY-o;l-=c*this._step*this._arrowKeyMultiplier(h),s+l>this._max?l=this._max-s:s+l<this._min&&(l=this._min-s),this._snapClampSetValue(s+l)}o=h.clientY},u=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",u)};this.$input.addEventListener("input",()=>{let h=parseFloat(this.$input.value);isNaN(h)||(this._stepExplicit&&(h=this._snap(h)),this.setValue(this._clamp(h)))}),this.$input.addEventListener("keydown",h=>{h.code==="Enter"&&this.$input.blur(),h.code==="ArrowUp"&&(h.preventDefault(),e(this._step*this._arrowKeyMultiplier(h))),h.code==="ArrowDown"&&(h.preventDefault(),e(this._step*this._arrowKeyMultiplier(h)*-1))}),this.$input.addEventListener("wheel",h=>{this._inputFocused&&(h.preventDefault(),e(this._step*this._normalizeMouseWheel(h)))},{passive:!1}),this.$input.addEventListener("mousedown",h=>{t=h.clientX,n=o=h.clientY,a=!0,s=this.getValue(),l=0,window.addEventListener("mousemove",i),window.addEventListener("mouseup",u)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=d=>{const g=this.$slider.getBoundingClientRect();let f=(v=d,_=g.left,x=g.right,m=this._min,y=this._max,(v-_)/(x-_)*(y-m)+m);var v,_,x,m,y;this._snapClampSetValue(f)},t=d=>{e(d.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let o,s,l=!1;const a=d=>{d.preventDefault(),this._setDraggingStyle(!0),e(d.touches[0].clientX),l=!1},i=d=>{if(l){const g=d.touches[0].clientX-o,f=d.touches[0].clientY-s;Math.abs(g)>Math.abs(f)?a(d):(window.removeEventListener("touchmove",i),window.removeEventListener("touchend",u))}else d.preventDefault(),e(d.touches[0].clientX)},u=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",i),window.removeEventListener("touchend",u)},h=this._callOnFinishChange.bind(this);let c;this.$slider.addEventListener("mousedown",d=>{this._setDraggingStyle(!0),e(d.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)}),this.$slider.addEventListener("touchstart",d=>{d.touches.length>1||(this._hasScrollBar?(o=d.touches[0].clientX,s=d.touches[0].clientY,l=!0):a(d),window.addEventListener("touchmove",i,{passive:!1}),window.addEventListener("touchend",u))},{passive:!1}),this.$slider.addEventListener("wheel",d=>{if(Math.abs(d.deltaX)<Math.abs(d.deltaY)&&this._hasScrollBar)return;d.preventDefault();const g=this._normalizeMouseWheel(d)*this._step;this._snapClampSetValue(this.getValue()+g),this.$input.value=this.getValue(),clearTimeout(c),c=setTimeout(h,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return this._min!==void 0}get _hasMax(){return this._max!==void 0}}class ot extends P{constructor(e,t,n,o){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(o)?o:Object.values(o),this._names=Array.isArray(o)?o:Object.keys(o),this._names.forEach(s=>{const l=document.createElement("option");l.innerHTML=s,this.$select.appendChild(l)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=t===-1?e:this._names[t],this}}class st extends P{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",o=>{o.code==="Enter"&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let Se=!1;class de{constructor({parent:e,autoPlace:t=e===void 0,container:n,width:o,title:s="Controls",injectStyles:l=!0,touchStyles:a=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",i=>{i.code!=="Enter"&&i.code!=="Space"||(i.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),a&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!Se&&l&&(function(i){const u=document.createElement("style");u.innerHTML=i;const h=document.querySelector("head link[rel=stylesheet], head style");h?document.head.insertBefore(u,h):document.head.appendChild(u)}('.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}'),Se=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),o&&this.domElement.style.setProperty("--width",o+"px"),this.domElement.addEventListener("keydown",i=>i.stopPropagation()),this.domElement.addEventListener("keyup",i=>i.stopPropagation())}add(e,t,n,o,s){if(Object(n)===n)return new ot(this,e,t,n);const l=e[t];switch(typeof l){case"number":return new nt(this,e,t,n,o,s);case"boolean":return new Je(this,e,t);case"string":return new st(this,e,t);case"function":return new ae(this,e,t)}console.error(`gui.add failed
	property:`,t,`
	object:`,e,`
	value:`,l)}addColor(e,t,n=1){return new it(this,e,t,n)}addFolder(e){return new de({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach(n=>{n instanceof ae||n._name in e.controllers&&n.load(e.controllers[n._name])}),t&&e.folders&&this.folders.forEach(n=>{n._title in e.folders&&n.load(e.folders[n._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(n=>{if(!(n instanceof ae)){if(n._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${n._name}"`);t.controllers[n._name]=n.save()}}),e&&this.folders.forEach(n=>{if(n._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${n._title}"`);t.folders[n._title]=n.save()}),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const o=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=o+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(t=>t.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),this._onChange!==void 0&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),this._onFinishChange!==void 0&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}function rt(p,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=p.getIndex(),o=p.getAttribute("position"),s=n?n.count:o.count;let l=0;const a=Object.keys(p.attributes),i={},u={},h=[],c=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let m=0,y=a.length;m<y;m++){const b=a[m],C=p.attributes[b];i[b]=new C.constructor(new C.array.constructor(C.count*C.itemSize),C.itemSize,C.normalized);const w=p.morphAttributes[b];w&&(u[b]||(u[b]=[]),w.forEach((A,k)=>{const F=new A.array.constructor(A.count*A.itemSize);u[b][k]=new A.constructor(F,A.itemSize,A.normalized)}))}const g=e*.5,f=Math.log10(1/e),v=Math.pow(10,f),_=g*v;for(let m=0;m<s;m++){const y=n?n.getX(m):m;let b="";for(let C=0,w=a.length;C<w;C++){const A=a[C],k=p.getAttribute(A),F=k.itemSize;for(let z=0;z<F;z++)b+=`${~~(k[c[z]](y)*v+_)},`}if(b in t)h.push(t[b]);else{for(let C=0,w=a.length;C<w;C++){const A=a[C],k=p.getAttribute(A),F=p.morphAttributes[A],z=k.itemSize,Q=i[A],G=u[A];for(let V=0;V<z;V++){const T=c[V],H=d[V];if(Q[H](l,k[T](y)),F)for(let D=0,ee=F.length;D<ee;D++)G[D][H](l,F[D][T](y))}}t[b]=l,h.push(l),l++}}const x=p.clone();for(const m in p.attributes){const y=i[m];if(x.setAttribute(m,new y.constructor(y.array.slice(0,l*y.itemSize),y.itemSize,y.normalized)),m in u)for(let b=0;b<u[m].length;b++){const C=u[m][b];x.morphAttributes[m][b]=new C.constructor(C.array.slice(0,l*C.itemSize),C.itemSize,C.normalized)}}return x.setIndex(h),x}function at(p){let e,t,n,o,s,l,a,i={backgroundColor:"#C0C0C0",backgroundOpacity:0,ambientLightColor:"#404040",ambientLightIntensity:1,directionalLightColor:"#ffffff",directionalLightIntensity:5,directionalLightX:1,directionalLightY:1,directionalLightZ:1,primaryModelColor:"#ff0000",primaryModelOpacity:1,primaryModelWireframe:!1,cloneModelColor:"#ffffff",cloneModelOpacity:1,cloneModelWireframe:!1,clonePositionX:.8,clonePositionY:.22,clonePositionZ:.55,cloneRotationX:-Math.PI/3,cloneRotationY:-Math.PI,cloneRotationZ:-Math.PI/3,enableRotation:!0,pivotRotationSpeed:5e-4,originalRotationSpeed:7e-4,cloneRotationSpeed:-5e-4,cloneRotationSpeedX:-5e-4,originalBlendMode:"MaxEquation",cloneBlendMode:"AddEquation",selectedModel:"random",autoRotateCamera:!1,cameraAutoRotateSpeed:1,enableDepthTest:!1,enableStencil:!0,alphaTest:.5};const u=[{name:"horse",url:"/obj/horse_d.obj",cameraPosition:{desktop:[-90,0,0],mobile:[-100,5,1e4]}},{name:"hand",url:"/obj/hand_d.obj",cameraPosition:{desktop:[-120,-50,200],mobile:[-20,15,500]}}];let h=null,c=null,d=null,g=null,f=null;function v(){return u[Math.floor(Math.random()*u.length)]}function _(){a=new de;const r=document.createElement("div");r.id="gui-wrapper",r.style.position="fixed",r.style.bottom="2vh",r.style.right="2vw",r.style.zIndex="10000",r.style.display="none",r.appendChild(a.domElement),document.body.appendChild(r),a.domElement.style.position="relative",a.domElement.style.top="0",a.domElement.style.right="0",Math.min(window.innerWidth,window.innerHeight)<768&&(a.domElement.style.transform="scale(0.7)",a.domElement.style.transformOrigin="bottom right");const I=a.addFolder("Background");I.addColor(i,"backgroundColor").onChange(x),I.add(i,"backgroundOpacity",0,1,.1).onChange(x);const $=a.addFolder("Lighting");$.addColor(i,"ambientLightColor").onChange(m),$.add(i,"ambientLightIntensity",0,5,.1).onChange(m),$.addColor(i,"directionalLightColor").onChange(m),$.add(i,"directionalLightIntensity",0,10,.1).onChange(m),$.add(i,"directionalLightX",-5,5,.1).onChange(m),$.add(i,"directionalLightY",-5,5,.1).onChange(m),$.add(i,"directionalLightZ",-5,5,.1).onChange(m);const j=a.addFolder("primary model");j.addColor(i,"primaryModelColor").onChange(y),j.add(i,"primaryModelOpacity",0,1,.1).onChange(y),j.add(i,"primaryModelWireframe").onChange(y);const L=a.addFolder("Clone Model");L.addColor(i,"cloneModelColor").onChange(y),L.add(i,"cloneModelOpacity",0,1,.1).onChange(y),L.add(i,"cloneModelWireframe").onChange(y);const R=L.addFolder("Position");R.add(i,"clonePositionX",-2,2,.01).onChange(b),R.add(i,"clonePositionY",-2,2,.01).onChange(b),R.add(i,"clonePositionZ",-2,2,.01).onChange(b);const B=L.addFolder("Rotation");B.add(i,"cloneRotationX",-Math.PI,Math.PI,.01).onChange(b),B.add(i,"cloneRotationY",-Math.PI,Math.PI,.01).onChange(b),B.add(i,"cloneRotationZ",-Math.PI,Math.PI,.01).onChange(b);const Y=a.addFolder("Animation");Y.add(i,"enableRotation").name("Enable Rotation"),Y.add(i,"pivotRotationSpeed",-.01,.01,1e-4).name("Pivot Speed"),Y.add(i,"originalRotationSpeed",-.01,.01,1e-4).name("Original Speed"),Y.add(i,"cloneRotationSpeed",-.01,.01,1e-4).name("Clone Speed Y"),Y.add(i,"cloneRotationSpeedX",-.01,.01,1e-4).name("Clone Speed X");const N=a.addFolder("Camera");N.add(i,"autoRotateCamera").onChange(C),N.add(i,"cameraAutoRotateSpeed",.1,5,.1).onChange(C);const M=a.addFolder("Blend"),he=["NormalBlending","AddEquation","SubtractEquation","MaxEquation","MinEquation"];M.add(i,"originalBlendMode",he).onChange(y),M.add(i,"cloneBlendMode",he).onChange(y);const ce=a.addFolder("model"),Fe=["random",...u.map(Ie=>Ie.name)];ce.add(i,"selectedModel",Fe).onChange(w);const te=a.addFolder("Actions");te.add({resetCamera:k},"resetCamera").name("Reset Camera"),te.add({loadRandomModel:A},"loadRandomModel").name("Load Random Model"),I.close(),$.close(),R.close(),B.close(),M.close(),ce.close(),te.close()}function x(){n.setClearColor(i.backgroundColor,i.backgroundOpacity)}function m(){g&&(g.color.setHex(i.ambientLightColor.replace("#","0x")),g.intensity=i.ambientLightIntensity),f&&(f.color.setHex(i.directionalLightColor.replace("#","0x")),f.intensity=i.directionalLightIntensity,f.position.set(i.directionalLightX,i.directionalLightY,i.directionalLightZ).normalize())}function y(){c&&c.traverse(function(r){if(r.isMesh){r.material.color.setHex(i.primaryModelColor.replace("#","0x")),r.material.opacity=i.primaryModelOpacity,r.material.transparent=i.primaryModelOpacity<1,r.material.wireframe=i.primaryModelWireframe,r.material.depthTest=i.enableDepthTest,r.material.depthWrite=!i.enableDepthTest,r.material.stencilWrite=i.enableStencil,r.material.alphaTest=i.alphaTest;const E={NormalBlending:J,AddEquation:se,SubtractEquation:Ee,MaxEquation:oe,MinEquation:Ce};i.originalBlendMode!=="NormalBlending"?(r.material.blending=Z,r.material.blendEquation=E[i.originalBlendMode],r.material.blendSrc=ye,r.material.blendDst=we):r.material.blending=J,i.enableStencil&&(r.material.stencilZPass=Ae)}}),d&&d.traverse(function(r){if(r.isMesh){r.material.color.setHex(i.cloneModelColor.replace("#","0x")),r.material.opacity=i.cloneModelOpacity,r.material.transparent=i.cloneModelOpacity<1,r.material.wireframe=i.cloneModelWireframe,r.material.depthTest=i.enableDepthTest,r.material.alphaTest=i.alphaTest;const E={NormalBlending:J,AddEquation:se,SubtractEquation:Ee,MaxEquation:oe,MinEquation:Ce};i.cloneBlendMode!=="NormalBlending"?(r.material.blending=Z,r.material.blendEquation=E[i.cloneBlendMode],r.material.blendSrc=U,r.material.blendDst=U):r.material.blending=J,i.enableStencil&&(r.material.stencilFunc=xe,r.material.stencilRef=0)}})}function b(){d&&(d.position.set(i.clonePositionX,i.clonePositionY,i.clonePositionZ),d.rotation.set(i.cloneRotationX,i.cloneRotationY,i.cloneRotationZ))}function C(){o&&(o.autoRotate=i.autoRotateCamera,o.autoRotateSpeed=i.cameraAutoRotateSpeed)}function w(){if(i.selectedModel==="random")A();else{const r=u.find(E=>E.name===i.selectedModel);r&&G(r.url,E=>T(E,r.cameraPosition,r.name),V)}}function A(){const r=v();console.log("Loading model:",r.name,r.url),G(r.url,E=>T(E,r.cameraPosition,r.name),V)}function k(){if(h&&t){const E=Math.min(window.innerWidth,window.innerHeight)<600?h.cameraPosition.mobile:h.cameraPosition.desktop;t.position.set(...E),o.reset()}}function F(){const r=document.getElementById("gui-wrapper");r&&(r.style.display==="none"||r.style.display===""?r.style.display="block":r.style.display="none")}function z(r){return r.isBufferGeometry&&(r=rt(r),r.computeVertexNormals()),r}function Q(){e=new Re,Math.min(window.innerWidth,window.innerHeight)<600?t=new be(24,window.innerWidth/window.innerHeight*2,.1,1e3):t=new be(18,window.innerWidth/window.innerHeight/2,.1,1e3),n=new Be({alpha:!0}),n.shadowMap.enabled=!0,n.shadowMap.type=Oe,n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(i.backgroundColor,i.backgroundOpacity),document.getElementById(p).appendChild(n.domElement),o=new He(t,n.domElement),o.enableDamping=!0,o.dampingFactor=.25,o.enableZoom=!0,o.zoomSpeed=.2,o.rotateSpeed=.5,o.minDistance=.5,o.maxDistance=4.5,o.enablePan=!1,g=new Ye(i.ambientLightColor,i.ambientLightIntensity),e.add(g),f=new We(i.directionalLightColor,i.directionalLightIntensity),f.position.set(i.directionalLightX,i.directionalLightY,i.directionalLightZ).normalize(),e.add(f),s=new ke,e.add(s),_(),A(),window.addEventListener("resize",H,!1),H(),D()}function G(r,E,I){new Ue().load(r,j=>{j.traverse(function(L){L.isMesh&&(L.geometry=z(L.geometry),L.material=new ve({color:i.primaryModelColor,wireframe:i.primaryModelWireframe,depthWrite:!i.enableDepthTest,stencilWrite:i.enableStencil,stencilZPass:Ae,alphaTest:i.alphaTest,blending:Z,blendEquation:oe,blendSrc:ye,blendDst:we}))}),E(j)},void 0,I)}function V(r){console.error("Error loading OBJ model:",r)}function T(r,E,I){for(h=u.find(M=>M.name===I);s.children.length;){const M=s.children[0];s.remove(M),M.geometry&&M.geometry.dispose(),M.material&&M.material.dispose()}const $=new Te().setFromObject(r),j=$.getCenter(new O),L=$.getSize(new O),R=Math.max(L.x,L.y,L.z);r.scale.multiplyScalar(1/R),r.position.sub(j.multiplyScalar(1/R)),c=r;const B=r.clone();d=B,I==="horse"?(i.clonePositionX=.8,i.clonePositionY=.22,i.clonePositionZ=.55,i.cloneRotationX=Math.PI/-3,i.cloneRotationY=Math.PI/-1,i.cloneRotationZ=Math.PI/-3):I==="hand"?(i.clonePositionX=.3,i.clonePositionY=-.02,i.clonePositionZ=-.05,i.cloneRotationX=Math.PI/9,i.cloneRotationY=Math.PI/4,i.cloneRotationZ=Math.PI/5):I==="sword"&&(i.clonePositionX=.1,i.clonePositionY=-.15,i.clonePositionZ=-.1,i.cloneRotationX=Math.PI/-1,i.cloneRotationY=Math.PI/4,i.cloneRotationZ=Math.PI/-3),b(),B.traverse(function(M){M.isMesh&&(M.material=new ve({color:i.cloneModelColor,wireframe:i.cloneModelWireframe,depthTest:i.enableDepthTest,stencilWrite:i.enableStencil,alphaTest:i.alphaTest,stencilFunc:xe,stencilRef:0,blending:Z,blendEquation:se,blendSrc:U,blendDst:U}))}),s.add(c),s.add(d),y(),t.lookAt(j);const N=Math.min(window.innerWidth,window.innerHeight)<600?E.mobile:E.desktop;t.position.set(...N),a&&a.controllersRecursive().forEach(M=>{M.updateDisplay()})}function H(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight);const r=Math.min(window.innerWidth,window.innerHeight)<768;a&&(r?(a.domElement.style.transform="scale(0.7)",a.domElement.style.transformOrigin="bottom right"):(a.domElement.style.transform="scale(1)",a.domElement.style.transformOrigin="bottom right"))}function D(){i.enableRotation&&s&&s.children.length>0&&(s.rotation.y+=i.pivotRotationSpeed,c&&(c.rotation.y+=i.originalRotationSpeed),d&&(d.rotation.y+=i.cloneRotationSpeed,d.rotation.x+=i.cloneRotationSpeedX)),o.update(),n.render(e,t),i.enableRotation&&(l=requestAnimationFrame(D))}function ee(){for(a&&a.destroy(),window.removeEventListener("resize",H),cancelAnimationFrame(l);s.children.length;){const E=s.children[0];s.remove(E),E.geometry&&E.geometry.dispose(),E.material&&E.material.dispose()}const r=document.getElementById(p);r&&n.domElement&&r.removeChild(n.domElement)}return window.addEventListener("keydown",r=>{(r.key==="R"||r.key==="r")&&(i.enableRotation=!i.enableRotation,a&&a.controllersRecursive().forEach(E=>{E.property==="enableRotation"&&E.updateDisplay()})),(r.key==="G"||r.key==="g")&&F(),(r.key==="M"||r.key==="m")&&A()}),Q(),{dispose:ee,gui:a,loadRandomModel:A,resetCamera:k,toggleGUI:F}}function ct({containerId:p="horseContainer1"}){const e=ue.useRef(null);return ue.useEffect(()=>{const t=at(p);e.current=t;const n=document.getElementById(p),o=s=>{s.preventDefault(),e.current&&typeof e.current.toggleGUI=="function"&&e.current.toggleGUI()};return n&&n.addEventListener("contextmenu",o),()=>{n&&n.removeEventListener("contextmenu",o),e.current&&typeof e.current.dispose=="function"&&e.current.dispose()}},[p]),Pe.jsx("div",{id:p,className:"vis-container"})}export{ct as default};
