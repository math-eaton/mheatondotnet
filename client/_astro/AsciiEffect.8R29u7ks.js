class q{constructor(r,L=" .:-=+*#%@",s={}){const f=s.resolution||.15,n=s.scale||1,D=s.color||!1,R=s.alpha||!1,H=s.block||!1,M=s.invert||!1,C=s.strResolution||"low";let k,x;const y=document.createElement("div");y.style.cursor="default";const a=document.createElement("table");y.appendChild(a);let c,l,h;this.setSize=function(e,o){k=e,x=o,r.setSize(e,o),B()},this.render=function(e,o){r.render(e,o),W(a)},this.domElement=y;function B(){c=Math.floor(k*f),l=Math.floor(x*f),d.width=c,d.height=l,h=r.domElement,h.style.backgroundColor&&(a.rows[0].cells[0].style.backgroundColor=h.style.backgroundColor,a.rows[0].cells[0].style.color=h.style.color),a.cellSpacing=0,a.cellPadding=0;const e=a.style;e.whiteSpace="pre",e.margin="0px",e.padding="0px",e.letterSpacing=t+"px",e.fontFamily=$,e.fontSize=T+"px",e.lineHeight=P+"px",e.textAlign="left",e.textDecoration="none"}const F=" .,:;i1tfLCG08@".split(""),G=" CGO08@".split(""),$="courier new, monospace",O=r.domElement,d=document.createElement("canvas");if(!d.getContext)return;const g=d.getContext("2d");if(!g.getImageData)return;let m=D?G:F;L&&(m=L);const T=2/f*n,P=2/f*n;let t=0;if(C=="low")switch(n){case 1:t=-1;break;case 2:case 3:t=-2.1;break;case 4:t=-3.1;break;case 5:t=-4.15;break}if(C=="medium")switch(n){case 1:t=0;break;case 2:t=-1;break;case 3:t=-1.04;break;case 4:case 5:t=-2.1;break}if(C=="high")switch(n){case 1:case 2:t=0;break;case 3:case 4:case 5:t=-1;break}function W(e){g.clearRect(0,0,c,l),g.drawImage(O,0,0,c,l);const o=g.getImageData(0,0,c,l).data;let u="";for(let w=0;w<l;w+=2){for(let S=0;S<c;S++){const b=(w*c+S)*4,I=o[b],E=o[b+1],v=o[b+2],z=o[b+3];let p,A;A=(.3*I+.59*E+.11*v)/255,z==0&&(A=1),p=Math.floor((1-A)*(m.length-1)),M&&(p=m.length-p-1);let i=m[p];(i===void 0||i==" ")&&(i="&nbsp;"),D?u+="<span style='color:rgb("+I+","+E+","+v+");"+(H?"background-color:rgb("+I+","+E+","+v+");":"")+(R?"opacity:"+z/255+";":"")+"'>"+i+"</span>":u+=i}u+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${k}px;height:${x}px;overflow:hidden">${u}</td></tr>`}}}export{q as A};
